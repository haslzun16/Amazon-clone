(this["webpackJsonpamazon-clone"]=this["webpackJsonpamazon-clone"]||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){},107:function(e,t,c){"use strict";c.r(t);var s=c(3),n=c.n(s),i=c(30),a=c.n(i),r=(c(61),c(50)),o=c(8),l=(c(62),c(63),c.p+"static/media/amazon-logo-white.79d0180e.png"),d=c(51),j=c.n(d),u=c(52),b=c.n(u),h=c(14),m=c(2),O=Object(s.createContext)(),p=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(m.jsx)(O.Provider,{value:Object(s.useReducer)(t,c),children:n})},x=function(){return Object(s.useContext)(O)},g=c(38),_=g.a.initializeApp({apiKey:"AIzaSyCbZH7iJKpmIoPmfdBwmO90lpAymuG0Cko",authDomain:"clone-6a45d.firebaseapp.com",projectId:"clone-6a45d",storageBucket:"clone-6a45d.appspot.com",messagingSenderId:"673371642021",appId:"1:673371642021:web:bc1c48d8f8b9b8f85ad54c",measurementId:"G-CX5TWWZPFJ"}).firestore(),v=g.a.auth();var f=function(){var e=x(),t=Object(o.a)(e,2),c=t[0],s=c.basket,n=c.user;return t[1],Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)(h.b,{to:"/",children:Object(m.jsx)("img",{className:"header__logo",src:l})}),Object(m.jsxs)("div",{className:"header__search",children:[Object(m.jsx)("input",{className:"header__searchInput",type:"text"}),Object(m.jsx)(j.a,{className:"header__searchIcon"})]}),Object(m.jsxs)("div",{className:"header__nav",children:[Object(m.jsx)(h.b,{to:!n&&"/login",children:Object(m.jsxs)("div",{className:"header__option",onClick:function(){n&&v.signOut()},children:[Object(m.jsxs)("span",{className:"header_optionLineOne",children:["Hello ",n?n.email:"guest"]}),Object(m.jsx)("span",{className:"header_optionLineTwo",children:n?"Sign Out":"Sign In"})]})}),Object(m.jsx)(h.b,{to:"/orders",children:Object(m.jsxs)("div",{className:"header__option",children:[Object(m.jsx)("span",{className:"header_optionLineOne",children:"Returns"}),Object(m.jsx)("span",{className:"header_optionLineTwo",children:"& Orders"})]})}),Object(m.jsxs)("div",{className:"header__option",children:[Object(m.jsx)("span",{className:"header__optionLineOne",children:"Your"}),Object(m.jsx)("span",{className:"header__optionLineTwo",children:"Prime"})]}),Object(m.jsx)(h.b,{to:"/checkout",children:Object(m.jsxs)("div",{class:"header__optionBasket",children:[Object(m.jsx)(b.a,{}),Object(m.jsx)("span",{class:"header__optionLineTwo header__basketCount",children:s.length})]})})]})]})};c(77),c(78);var y=function(e){var t=e.id,c=e.title,s=e.image,n=e.price,i=e.rating,a=x(),r=Object(o.a)(a,2),l=(r[0].basket,r[1]);return Object(m.jsxs)("div",{className:"product",children:[Object(m.jsxs)("div",{class:"product__info",children:[Object(m.jsxs)("p",{children:[" ",c]}),Object(m.jsxs)("p",{className:"product__price",children:[Object(m.jsx)("small",{children:"$"}),Object(m.jsx)("strong",{children:n})]}),Object(m.jsx)("div",{class:"product__rating",children:Array(i).fill().map((function(e,t){return Object(m.jsx)("p",{children:"\u2b50\ufe0f"})}))})]}),Object(m.jsx)("img",{className:"product__image",src:s,alt:""}),Object(m.jsx)("button",{onClick:function(){l({type:"ADD_TO_BASKET",item:{id:t,title:c,image:s,price:n,rating:i}})},children:"Add to Basket"})]})};var S=function(){return Object(m.jsx)("div",{className:"home",children:Object(m.jsxs)("div",{class:"home__container",children:[Object(m.jsx)("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:""}),Object(m.jsxs)("div",{class:"home__row",children:[Object(m.jsx)(y,{className:"items",id:"6396205",title:"Atomic Habits ",price:27.99,image:"https://images-na.ssl-images-amazon.com/images/I/51vSbWpF+dS._SX329_BO1,204,203,200_.jpg",rating:5}),Object(m.jsx)(y,{className:"items",id:"63646131",title:"SteelSeries - Apex 3 Wired Gaming Whisper Quiet Switch Keyboard with 10 zone RGB Backlighting - Black",price:49.99,image:"https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6396/6396205_sd.jpg;maxHeight=640;maxWidth=550",rating:4})]}),Object(m.jsxs)("div",{class:"home__row",children:[Object(m.jsx)(y,{className:"items",id:"68632389",title:"NutriBullet - 4-Speed Blender - Dark Gray ",price:99.99,image:"https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6354/6354060_rd.jpg;maxHeight=640;maxWidth=550",rating:5}),Object(m.jsx)(y,{className:"items",id:"86138113",title:"VIZIO - 50 Class V-Series LED 4K UHD SmartCast TV",price:329.99,image:"https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6416/6416380_sd.jpg;maxHeight=640;maxWidth=550",rating:4}),Object(m.jsx)(y,{className:"items",id:"943322184",title:"Dyson - V8 Animal Cord-Free Stick Vacuum - Iron ",price:399.99,image:"https://pisces.bbystatic.com/image2/BestBuy_US/images/products/5712/5712666_sd.jpg;maxHeight=640;maxWidth=550",rating:5})]}),Object(m.jsx)("div",{class:"home__row",children:Object(m.jsx)(y,{className:"items",id:"7615621",title:"LG - 2.1-Channel 300W Soundbar System with 6 inch Subwoofer - Black ",price:179.99,image:"https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6355/6355625_sd.jpg;maxHeight=640;maxWidth=550",rating:4})})]})})},k=c(10);c(79),c(80);var N=function(e){var t=e.id,c=e.image,s=e.title,n=e.price,i=e.rating,a=e.hideButton,r=x(),l=Object(o.a)(r,2),d=(l[0].basket,l[1]);return Object(m.jsxs)("div",{className:"checkoutProduct",children:[Object(m.jsx)("img",{className:"checkoutProduct__image",src:c,alt:""}),Object(m.jsxs)("div",{className:"checkoutProduct__info",children:[Object(m.jsx)("p",{className:"checkoutProduct__title",children:s}),Object(m.jsxs)("p",{className:"checkoutProduct__price",children:[Object(m.jsx)("small",{children:"$"}),Object(m.jsx)("strong",{children:n})]}),Object(m.jsx)("div",{className:"checkoutProduct__rating",children:Array(i).fill().map((function(e,t){return Object(m.jsx)("p",{children:"\u2b50\ufe0f"})}))}),!a&&Object(m.jsx)("button",{onClick:function(){d({type:"REMOVE_FROM_BASKET",id:t})},children:"Remove from Basket"})]})]})},B=(c(81),c(26)),C=c.n(B),E=c(24),T=c(21),w=function(e){return e.reduce((function(e,t){return t.price+e}),0)},A=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(T.a)(Object(T.a)({},e),{},{basket:[].concat(Object(E.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var c=e.basket.findIndex((function(e){return e.id===t.id})),s=Object(E.a)(e.basket);return c>=0?s.splice(c,1):console.warn("Cant remove product (id: ".concat(t.id,") as its not in basket!")),Object(T.a)(Object(T.a)({},e),{},{basket:s});case"SET_USER":return Object(T.a)(Object(T.a)({},e),{},{user:t.user});case"EMPTY_BASKET":return Object(T.a)(Object(T.a)({},e),{},{basket:[]});default:return e}};var P=function(){var e=Object(k.f)(),t=x(),c=Object(o.a)(t,2),s=c[0].basket;return c[1],Object(m.jsxs)("div",{className:"subtotal",children:[Object(m.jsx)(C.a,{renderText:function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{children:["Subtotal (",s.length," item):",Object(m.jsx)("strong",{children:e})]}),Object(m.jsxs)("small",{class:"subtotal__gift",children:[Object(m.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},decimalScale:2,value:w(s),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(m.jsx)("button",{onClick:function(t){return e.push("/payment")},children:"Proceed to Checkout"})]})};var I=function(){var e=x(),t=Object(o.a)(e,2),c=t[0],s=c.basket,n=c.user;return t[1],console.log("the basket has>>>",s),Object(m.jsxs)("div",{className:"checkout",children:[Object(m.jsxs)("div",{class:"checkout__left",children:[Object(m.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTsZGt59A5Sl5pFwz9_zET7ETTf4-R43j-NKSNScRnu1W_c3vN1CDGngf4ExgYMw25AEg&usqp=CAU",alt:"",class:"checkout__ad"}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{children:["Hello, ",n.email]}),Object(m.jsx)("h2",{class:"checkout__title",children:"Your shopping Basket"}),s.map((function(e){return Object(m.jsx)(N,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))]})]}),Object(m.jsx)("div",{class:"checkout__right",children:Object(m.jsx)(P,{})})]})};c(83);var D=function(){var e=Object(k.f)(),t=Object(s.useState)(""),c=Object(o.a)(t,2),n=c[0],i=c[1],a=Object(s.useState)(""),r=Object(o.a)(a,2),l=r[0],d=r[1];return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)(h.b,{to:"/",children:Object(m.jsx)("img",{className:"login__logo",src:"https://api.freelogodesign.org/assets/blog/img/20180911104538148amazon-logo.jpg",alt:""})}),Object(m.jsxs)("div",{class:"login__container",children:[Object(m.jsx)("h1",{children:"Sign-in"}),Object(m.jsxs)("form",{action:"",children:[Object(m.jsx)("h5",{children:"Email"}),Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)}}),Object(m.jsx)("h5",{children:"Password"}),Object(m.jsx)("input",{type:"password",value:l,onChange:function(e){return d(e.target.value)}}),Object(m.jsx)("button",{className:"login__signInButton",type:"submit",onClick:function(t){t.preventDefault(),v.signInWithEmailAndPassword(n,l).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]}),Object(m.jsx)("p",{children:"By signing-in you agree to the Amazon clone (fake) Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads Notice"}),Object(m.jsx)("button",{className:"login__registerButton",onClick:function(t){t.preventDefault(),v.createUserWithEmailAndPassword(n,l).then((function(t){console.log(t),t&&e.push("/")})).catch((function(e){return alert(e.message)}))},children:"Create your Amazon Account"})]})]})},R=c(28),M=c.n(R),L=c(37),W=(c(85),c(25)),G=c(53),U=c.n(G).a.create({baseURL:"https://us-central1-clone-6a45d.cloudfunctions.net/api"});var z=function(){var e=x(),t=Object(o.a)(e,2),c=t[0],n=c.basket,i=c.user,a=t[1],r=Object(W.useStripe)(),l=Object(W.useElements)(),d=Object(k.f)(),j=Object(s.useState)(!1),u=Object(o.a)(j,2),b=u[0],O=u[1],p=Object(s.useState)(!1),g=Object(o.a)(p,2),v=g[0],f=g[1],y=Object(s.useState)(null),S=Object(o.a)(y,2),B=(S[0],S[1]),E=Object(s.useState)(!0),T=Object(o.a)(E,2),A=T[0],P=T[1],I=Object(s.useState)(!0),D=Object(o.a)(I,2),R=D[0],G=D[1];Object(s.useEffect)((function(){(function(){var e=Object(L.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({method:"post",url:"/payments/create?total=".concat(100*w(n))});case 2:t=e.sent,console.log("the new client secret is >>>>",t.data.clientSecret),G(t.data.clientSecret);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),console.log("the secret is >>>>",R);var z=function(){var e=Object(L.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!0),e.next=4,r.confirmCardPayment(R,{payment_method:{card:l.getElement(W.CardElement)}}).then((function(e){var t=e.paymentIntent;_.collection("user").doc(null===i||void 0===i?void 0:i.uid).collection("orders").doc(t.id).set({basket:n,amount:t.amount,created:t.created}),O(!0),B(null),f(!1),a({type:"EMPTY_BASKET"}),d.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"payment",children:Object(m.jsxs)("div",{class:"payment__container",children:[Object(m.jsxs)("h1",{children:["Checkout ",Object(m.jsxs)(h.b,{to:"/checkout",children:[null===n||void 0===n?void 0:n.length," items"]})]}),Object(m.jsxs)("div",{class:"payment__section",children:[Object(m.jsx)("div",{class:"payment__title",children:Object(m.jsx)("h3",{children:"Delivery address"})}),Object(m.jsxs)("div",{class:"payment__address",children:[Object(m.jsx)("p",{children:null===i||void 0===i?void 0:i.email}),Object(m.jsx)("p",{children:"123 React lane"}),Object(m.jsx)("p",{children:"Los Angeles, CA"})]})]}),Object(m.jsxs)("div",{class:"payment__section",children:[Object(m.jsx)("div",{class:"payment__title",children:Object(m.jsx)("h3",{children:"Review items and delivery"})}),Object(m.jsx)("div",{class:"payment__items",children:null===n||void 0===n?void 0:n.map((function(e){return Object(m.jsx)(N,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))})]}),Object(m.jsxs)("div",{class:"payment__section",children:[Object(m.jsx)("div",{class:"payment__title",children:Object(m.jsx)("h3",{children:"Payment Method"})}),Object(m.jsx)("div",{class:"payment__details",children:Object(m.jsxs)("form",{onSubmit:z,children:[Object(m.jsx)(W.CardElement,{onChange:function(e){P(e.empty),B(e.error?e.error.message:"")}}),Object(m.jsxs)("div",{class:"payment__priceContainer",children:[Object(m.jsx)(C.a,{renderText:function(e){return Object(m.jsxs)("h3",{children:["Order Total: ",e]})},decimalScale:2,value:w(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(m.jsx)("button",{disabled:v||A||b,children:Object(m.jsx)("span",{children:v?Object(m.jsx)("p",{children:"Processing"}):"Buy Now"})})]})]})})]})]})})},H=c(54),F=(c(103),c(104),c(55)),K=c.n(F);var V=function(e){var t,c=e.order;return Object(m.jsxs)("div",{className:"order",children:[Object(m.jsx)("h2",{children:"Order"}),Object(m.jsx)("p",{children:K.a.unix(c.data.created).format("MMMM Do YYYY, h:mma")}),Object(m.jsx)("p",{class:"order__id",children:Object(m.jsx)("small",{children:c.id})}),null===(t=c.data.basket)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(N,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0})})),Object(m.jsx)(C.a,{renderText:function(e){return Object(m.jsxs)("h3",{children:["Order Total: ",e]})},decimalScale:2,value:c.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"})]})};var Y=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],i=x(),a=Object(o.a)(i,2),r=a[0],l=(r.basket,r.user);return a[1],console.log("i am the user >>>>",l),Object(s.useEffect)((function(){l?_.collection("user").doc(null===l||void 0===l?void 0:l.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):n([])}),[l]),console.log("i am the order >>>>",c),Object(m.jsxs)("div",{className:"orders",children:[Object(m.jsx)("h1",{children:"Your orders"}),Object(m.jsx)("div",{class:"orders__order",children:null===c||void 0===c?void 0:c.map((function(e){return Object(m.jsx)(V,{order:e})}))})]})},J=Object(H.a)("pk_test_51J2LpfCOieh1r4Mq8lTzDwAvSJWxVVE0rvAMvRGvaol2QpxjqwsLmsvEqlaREgXCPakcC0kLDxHkRTli34MMdsDU00XweNY6uF");var q=function(){console.log(n.a.version);var e=x(),t=Object(o.a)(e,2);Object(r.a)(t[0]);var c=t[1];return Object(s.useEffect)((function(){v.onAuthStateChanged((function(e){console.log("The user is>>",e),c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),Object(m.jsx)(h.a,{children:Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(f,{}),Object(m.jsxs)(k.c,{children:[Object(m.jsx)(k.a,{path:"/payment",children:Object(m.jsx)(W.Elements,{stripe:J,children:Object(m.jsx)(z,{})})}),Object(m.jsx)(k.a,{path:"/checkout",children:Object(m.jsx)(I,{})}),Object(m.jsx)(k.a,{path:"/orders",children:Object(m.jsx)(Y,{})}),Object(m.jsx)(k.a,{path:"/login",children:Object(m.jsx)(D,{})}),Object(m.jsx)(k.a,{path:"/",children:Object(m.jsx)(S,{})})]})]})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,119)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(p,{initialState:{basket:[],user:null},reducer:A,children:Object(m.jsx)(q,{})})}),document.getElementById("root")),X()},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},83:function(e,t,c){},85:function(e,t,c){}},[[107,1,2]]]);
//# sourceMappingURL=main.62d53aaf.chunk.js.map